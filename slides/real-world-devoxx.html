<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">

  <meta name="author" content="Arnaud Bailly" />


  <meta name="dcterms.date" content="April 22, 2016" />

  <title>The Real Real World of Haskell</title>
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <link rel="stylesheet" href="/reveal.js/css/reveal.css"/>
    <style type="text/css">code{white-space: pre;}</style>

    <style type="text/css">code{white-space: pre;}</style>
    <style type="text/css">
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    </style>    


    <link rel="stylesheet" href="/reveal.js/css/theme/old-english-devoxx.css" id="theme">

    <!-- If the query includes 'print-pdf', include the PDF print sheet -->
    <script>
      if( window.location.search.match( /print-pdf/gi ) ) {
        var link = document.createElement( 'link' );
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = '/reveal.js/css/print/pdf.css';
        document.getElementsByTagName( 'head' )[0].appendChild( link );
      }
    </script>
    <script type="text/javascript"
            src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <!--[if lt IE 9]>
    <script src="/reveal.js/lib/js/html5shiv.js"></script>
    <![endif]-->

</head>
<body>
  <div class="reveal">
    <div class="slides">


<section>
    <h1 class="title">The Real Real World of Haskell</h1>

  <h2 class="subtitle">Relations on the Land of Pure Functional Programming by a Mortal Being</h2>


    <h3 class="author">Arnaud Bailly</h3>


    <h3 class="date">April 22, 2016</h3>
</section>



<section id="table-of-contents" class="slide level2">
<h2>Table of Contents</h2>
<ul>
<li class="fragment">How I Came to Reside in the Land of Haskell and Why It Matters</li>
<li class="fragment">On Various Aspects of Haskelland Civilisation and The Mores of Its Inhabitants</li>
<li class="fragment">Some Ways this Wonderful Journey Could Inspire the Reader</li>
</ul>
</section>
<section><section id="how-i-came-to-visit-haskelland" class="titleslide slide level1"><h1>How I Came to Visit Haskelland</h1></section><section class="slide level2">

<figure>
<img src="/images/geographie.jpg" />
</figure>
</section><section id="where-the-author-dares-to-present-himself" class="slide level2">
<h2>Where the author dares to present himself</h2>
<figure>
<img src="/images/ebeniste.jpg" />
</figure>
</section><section id="on-the-company-which-i-travelled-to-haskelland-for" class="slide level2">
<h2>On the Company which I travelled to Haskelland for</h2>
<figure>
<img src="/images/cm-website.png" />
</figure>
</section><section id="where-it-is-demonstrated-why-the-interest-of-the-honorable-reader-might-be-aroused" class="slide level2">
<h2>Where it is demonstrated why the interest of the honorable reader might be aroused</h2>
<ul>
<li class="fragment">This is not a Haskell tutorial</li>
<li class="fragment">This is not a Monad tutorial</li>
<li class="fragment">Let’s stop thinking <em>“Haskell is good for your brain but not for practical use”</em></li>
<li class="fragment">I will be happy if you end up thinking: <em>I could try this cool stuff in my next microservice</em></li>
<li class="fragment">I will be even happier if you can put to <strong>actual use</strong> some of the stuff I present here</li>
</ul>
</section></section>
<section><section id="on-various-aspects-of-haskelland" class="titleslide slide level1"><h1>On Various Aspects of Haskelland</h1></section><section class="slide level2">

<figure>
<img src="/images/frontispice.jpg" />
</figure>
</section><section class="slide level2">

<p>Where the author tries to cover the most important aspects of Haskeller’s civilisation in an extremely short span of time, thus probably missing lot of important points and generating frustration in the informed reader, but nevertheless hoping to convey enough tips for the audience to be willing to adopt some of the customs of those strange people.</p>
</section></section>
<section><section id="language" class="titleslide slide level1"><h1>Language</h1></section><section id="on-some-minor-differences-between-haskell-language-and-more-common-ones" class="slide level2">
<h2>On some minor differences between Haskell Language and more Common ones</h2>
<figure>
<img src="/images/analyse.jpg" />
</figure>
</section><section id="on-the-importance-of-composition-in-haskell" class="slide level2">
<h2>On the importance of composition in Haskell</h2>
<figure>
<img src="/images/musique.jpg" />
</figure>
</section><section class="slide level2">

<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">transactionsFromCashflows ::</span> <span class="dt">AccountId</span>
                          <span class="ot">-&gt;</span> (<span class="dt">CashFlow</span> <span class="ot">-&gt;</span> [<span class="dt">Transaction</span>])
                          <span class="ot">-&gt;</span> [<span class="dt">CashFlow</span>] <span class="ot">-&gt;</span> [<span class="dt">Transaction</span>]
transactionsFromCashflows pivot generator <span class="fu">=</span>
    concatMap <span class="fu">$</span> map (normalize <span class="fu">.</span> balance pivot) <span class="fu">.</span> generator</code></pre></div>
</section><section id="on-the-virtue-of-being-lazy" class="slide level2">
<h2>On the virtue of being lazy</h2>
<figure>
<img src="/images/femme-allongee.jpg" />
</figure>
</section><section id="on-some-of-the-less-desirable-aspects-of-the-language" class="slide level2">
<h2>On some of the less desirable aspects of the language</h2>
<figure>
<img src="/images/catacombes.jpg" />
</figure>
</section></section>
<section><section id="philosophy" class="titleslide slide level1"><h1>Philosophy</h1></section><section id="on-the-importance-of-types-for-haskellers" class="slide level2">
<h2>On the importance of Types for Haskellers</h2>
<figure>
<img src="/images/astronomie.jpg" />
</figure>
</section><section id="where-one-discovers-types-do-not-impose-extra-burden-at-runtime" class="slide level2">
<h2>Where one discovers types do not impose extra burden at runtime</h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="kw">newtype</span> <span class="dt">AccountNr</span> <span class="fu">=</span> <span class="dt">AccountNr</span> {<span class="ot"> accountNr ::</span> <span class="dt">T.Text</span> }
                    <span class="kw">deriving</span> (<span class="dt">Eq</span>,<span class="dt">Ord</span>,<span class="dt">Show</span>,<span class="dt">Read</span>)


<span class="kw">instance</span> <span class="dt">IsString</span> <span class="dt">AccountNr</span> <span class="kw">where</span>
    fromString <span class="fu">=</span> <span class="dt">AccountNr</span> <span class="fu">.</span> T.pack</code></pre></div>
</section><section id="where-it-is-shown-types-can-even-conjure-the-undead" class="slide level2">
<h2>Where it is shown types can even conjure the undead</h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="kw">data</span> <span class="dt">Base64</span>
<span class="kw">data</span> <span class="dt">Hex</span>
<span class="kw">newtype</span> <span class="dt">Encoded</span> code <span class="fu">=</span> <span class="dt">Encoded</span> {<span class="ot"> encodedText ::</span> <span class="dt">Text</span> }
<span class="ot">toBase64Text ::</span> <span class="dt">ByteString</span> <span class="ot">-&gt;</span> <span class="dt">Encoded</span> <span class="dt">Base64</span>
<span class="ot">toHex        ::</span> <span class="dt">ByteString</span> <span class="ot">-&gt;</span> <span class="dt">Encoded</span> <span class="dt">Hex</span></code></pre></div>
</section><section id="where-one-discovers-subtle-differences-cause-more-trouble-than-obvious-ones" class="slide level2">
<h2>Where one discovers subtle differences cause more trouble than obvious ones</h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="kw">class</span> (<span class="dt">Eq</span> a) <span class="ot">=&gt;</span> <span class="dt">Differ</span> a <span class="kw">where</span>
<span class="ot">  uniqueId    ::</span> a <span class="ot">-&gt;</span> <span class="dt">Id</span> a
<span class="ot">  constructor ::</span> a <span class="ot">-&gt;</span> <span class="dt">Entity</span> b
<span class="ot">  equals      ::</span> a <span class="ot">-&gt;</span> a <span class="ot">-&gt;</span> <span class="dt">Bool</span></code></pre></div>
</section><section id="where-one-starts-to-wonder-if-there-is-an-end-to-recursion" class="slide level2">
<h2>Where one starts to wonder if there is an end to recursion</h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="kw">class</span> (<span class="dt">ToJSON</span> (<span class="dt">Command</span> a)) <span class="ot">=&gt;</span> <span class="dt">BusinessModel</span> a <span class="kw">where</span>
  <span class="kw">data</span> <span class="dt">Event</span><span class="ot"> a   ::</span> <span class="fu">*</span>
  <span class="kw">data</span> <span class="dt">Command</span><span class="ot"> a ::</span> <span class="fu">*</span></code></pre></div>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="kw">type</span> family <span class="dt">Id</span><span class="ot"> a ::</span> <span class="fu">*</span>
<span class="kw">type</span> <span class="kw">instance</span> <span class="dt">Id</span> <span class="dt">Account</span>       <span class="fu">=</span> <span class="dt">AccountId</span>
<span class="kw">type</span> <span class="kw">instance</span> <span class="dt">Id</span> <span class="dt">Transaction</span>   <span class="fu">=</span> <span class="dt">TransactionId</span></code></pre></div>
</section><section id="where-it-is-shown-how-more-constraints-makes-one-more-free" class="slide level2">
<h2>Where it is shown how more constraints makes one more Free</h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="kw">data</span> <span class="dt">Gratis</span> f a <span class="fu">=</span> <span class="dt">Effectless</span> a
      <span class="fu">|</span> forall x<span class="fu">.</span> <span class="dt">Effectful</span> (f x) (x <span class="ot">-&gt;</span> <span class="dt">Gratis</span> f a)

<span class="kw">data</span> <span class="dt">EmailServiceF</span> a <span class="kw">where</span>
  <span class="dt">DoMail</span><span class="ot"> ::</span> <span class="dt">Emailer</span> <span class="ot">-&gt;</span> <span class="dt">Email</span> <span class="ot">-&gt;</span> <span class="dt">EmailServiceF</span> <span class="dt">EmailStatus</span>
  <span class="dt">GetAllEmails</span><span class="ot"> ::</span> <span class="dt">Confirmation</span> <span class="ot">-&gt;</span> <span class="dt">EmailServiceF</span> [<span class="dt">EmailWithStatus</span>]

<span class="kw">type</span> <span class="dt">MailService</span> <span class="fu">=</span> <span class="dt">Gratis</span> <span class="dt">EmailServiceF</span></code></pre></div>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">liftFF ::</span> <span class="dt">EmailServiceF</span> a <span class="ot">-&gt;</span> <span class="dt">MailService</span> a
liftFF c <span class="fu">=</span> <span class="dt">Effectful</span> c pure

<span class="ot">doMail ::</span> <span class="dt">Emailer</span> <span class="ot">-&gt;</span> <span class="dt">Email</span> <span class="ot">-&gt;</span> <span class="dt">MailService</span> <span class="dt">EmailStatus</span>
doMail mailer mail <span class="fu">=</span> liftFF <span class="fu">$</span> <span class="dt">DoMail</span> mailer mail

<span class="ot">doGetAllEmails ::</span> <span class="dt">Confirmation</span> <span class="ot">-&gt;</span> <span class="dt">MailService</span> [ <span class="dt">EmailWithStatus</span> ]
doGetAllEmails <span class="fu">=</span> liftFF <span class="fu">.</span> <span class="dt">GetAllEmails</span></code></pre></div>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">interpret ::</span> <span class="dt">MailService</span> a <span class="ot">-&gt;</span> <span class="dt">ExceptT</span> <span class="dt">L.Text</span> (<span class="dt">WebStateM</span> s l m) a
interpret (<span class="dt">Effectful</span> (<span class="dt">DoMail</span> mailer mail) f)        <span class="fu">=</span>
  lift (liftIO <span class="fu">$</span> mailer mail <span class="fu">&gt;&gt;=</span> handleSendingResult) <span class="fu">&gt;&gt;=</span> interpret <span class="fu">.</span> f
interpret (<span class="dt">Effectful</span> (<span class="dt">GetAllEmails</span> confirmation) f) <span class="fu">=</span>
  lift (runWithEmails <span class="fu">$</span> doGetEmails confirmation)     <span class="fu">&gt;&gt;=</span> interpret <span class="fu">.</span> f
interpret (<span class="dt">Effectless</span> a)                            <span class="fu">=</span> return a</code></pre></div>
</section></section>
<section><section id="mores-daily-life" class="titleslide slide level1"><h1>Mores &amp; Daily Life</h1></section><section id="where-the-amazed-foreigner-discovers-how-much-can-be-done-with-crude-tools" class="slide level2">
<h2>Where the amazed foreigner discovers how much can be done with crude tools</h2>
<figure>
<img src="/images/menuisier.jpg" />
</figure>
</section><section class="slide level2">

<figure>
<img src="/images/emacs.png" />
</figure>
</section><section class="slide level2">

<figure>
<img src="/images/ihaskell.png" />
</figure>
</section><section id="on-the-usefulness-and-efficiency-of-interacting-with-the-machine" class="slide level2">
<h2>On the usefulness and efficiency of interacting with the machine</h2>
<figure>
<img src="/images/tourneur.jpg" />
</figure>
</section><section id="on-the-typical-day-of-a-commoner-in-haskelland" class="slide level2">
<h2>On the typical day of a commoner in Haskelland</h2>
<ol type="1">
<li class="fragment">Write a skeletal test file, e.g. <code>test/FooTest.hs</code></li>
<li class="fragment">Start REPL in Emacs by loading file <code>C-c C-l</code></li>
<li class="fragment">See it fail to compile</li>
<li class="fragment"><code>:r</code>eload until it compiles</li>
<li class="fragment">Run the test and see it fail: <code>hspec myTest</code></li>
<li class="fragment">Fill in code until test passes</li>
<li class="fragment">Do a full compile and test run before pushing to CI</li>
</ol>
</section></section>
<section><section id="government" class="titleslide slide level1"><h1>Government</h1></section><section id="where-we-discover-haskellers-also-value-experimentation" class="slide level2">
<h2>Where we discover Haskellers also value experimentation</h2>
<figure>
<img src="/images/chymie.jpg" />
</figure>
</section><section id="where-we-see-empiricism-going-hand-in-hand-with-formalism" class="slide level2">
<h2>Where we see empiricism going hand in hand with formalism</h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="kw">instance</span> <span class="dt">Arbitrary</span> <span class="dt">ScaleRatio</span> <span class="kw">where</span>  arbitrary <span class="fu">=</span> <span class="fu">...</span>
<span class="kw">instance</span> <span class="dt">Arbitrary</span> <span class="dt">Transaction</span> <span class="kw">where</span>  arbitrary <span class="fu">=</span> <span class="fu">...</span></code></pre></div>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">prop_scaled_transaction_is_normalized ::</span> <span class="dt">Transaction</span> <span class="ot">-&gt;</span> <span class="dt">ScaleRatio</span>
                                       <span class="ot">-&gt;</span> <span class="dt">Bool</span>
prop_scaled_transaction_is_normalized tx (<span class="dt">ScaleRatio</span> ratio) <span class="fu">=</span>
  isNormalized tx&#39; <span class="fu">&amp;&amp;</span> isBalanced tx&#39;
  <span class="kw">where</span>
    tx&#39; <span class="fu">=</span> scale ratio tx</code></pre></div>
</section><section id="where-one-discovers-quickcheck-can-be-useful-beside-testing-properties" class="slide level2">
<h2>Where one discovers QuickCheck can be useful beside testing properties</h2>
<h3 id="generating-sample-data-to-test-migration">Generating sample data to test migration</h3>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">sample_v8_Events ::</span> [<span class="dt">ByteString</span>]
sample_v8_Events <span class="fu">=</span>
  [<span class="st">&quot;{\&quot;tag\&quot;:\&quot;AddedDocuments\&quot;,\&quot;contents\&quot;:[\&quot;c1f09023b3a9398a1d8a257c372392ab\&quot;,[]]}&quot;</span>
  , <span class="st">&quot;{\&quot;tag\&quot;:\&quot;UpdatedInvestor\&quot;,\&quot;contents\&quot;:{\&quot;invDocuments\&quot;:[],</span>
<span class="st">     \&quot;invBankAccount\&quot;:{\&quot;bankBranch\&quot;:\&quot;Ge\&quot;,\&quot;bankAccountName\&quot;:\&quot;1W\&quot;,\&quot;bankAccountNo\&quot;:\&quot;nN\&quot;,\&quot;bankName\&quot;:\&quot;AU\&quot;},</span>
<span class="st">     \&quot;invId\&quot;:\&quot;46ed3336bc60a5a423962e9b6343c003\&quot;,\&quot;invReferralCode\&quot;:{\&quot;refer\&quot;:\&quot;\&quot;},\&quot;invAccepttandcs\&quot;:false,</span>
<span class="st">     \&quot;invLegalEntity\&quot;:{\&quot;tag\&quot;:\&quot;Corporate\&quot;,\&quot;primaryContactPosition\&quot;:{\&quot;tag\&quot;:\&quot;OtherPosition\&quot;,\&quot;contents\&quot;:\&quot;jZ\&quot;},\&quot;primaryContact\&quot;:{\&quot;personTitle\&quot;:\&quot;Y8\&quot;,\&quot;personFirstName\&quot;:\&quot;qf\&quot;,\&quot;personLastName\&quot;:\&quot;pz\&quot;,\&quot;personIdNumber\&quot;:\&quot;yC\&quot;,\&quot;personTelephone\&quot;:\&quot;nC\&quot;,\&quot;personEmail\&quot;:\&quot;xwmRJAstJRrvBy1x8FnJ4Y2.6nmGy@opBpRq.sg\&quot;},\&quot;company\&quot;:{\&quot;companyPostcode\&quot;:\&quot;kT\&quot;,\&quot;companyName\&quot;:\&quot;-o\&quot;,\&quot;companyUEN\&quot;:\&quot;LA\&quot;,\&quot;legalForm\&quot;:\&quot;LTD\&quot;,\&quot;companyAddress\&quot;:\&quot;oh\&quot;}}}}&quot;</span>
   , <span class="st">&quot;{\&quot;tag\&quot;:\&quot;NoEvent\&quot;,\&quot;contents\&quot;:[]}&quot;</span>
   , <span class="st">&quot;{\&quot;tag\&quot;:\&quot;AddedDocuments\&quot;,\&quot;contents\&quot;:[\&quot;b9973afdd569f11269fe0be736086049\&quot;,[]]}&quot;</span></code></pre></div>
</section><section class="slide level2">

<h3 id="generating-execution-sequences-representing-typical-scenarios">Generating execution sequences representing typical scenarios</h3>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">genAdminActions <span class="fu">=</span>
  frequency [ (<span class="dv">1</span>,  return [])
            , (<span class="dv">1</span>,  <span class="kw">do</span>
                   f <span class="ot">&lt;-</span> <span class="dt">NewListing</span> <span class="fu">&lt;$&gt;</span> arbitrary <span class="fu">&lt;*&gt;</span> newFacility <span class="fu">&lt;*&gt;</span> rate <span class="fu">&lt;*&gt;</span> risk
                   (f<span class="fu">:</span>) <span class="fu">&lt;$&gt;</span> genAdminActions)
            , (<span class="dv">10</span>, (<span class="dt">AcceptSomeFacility</span><span class="fu">:</span>) <span class="fu">&lt;$&gt;</span> genAdminActions)
            , (<span class="dv">5</span>,  (<span class="dt">LookupFacilities</span><span class="fu">:</span>) <span class="fu">&lt;$&gt;</span> genAdminActions)
            , (<span class="dv">6</span>,  (<span class="dt">AdvanceDay</span><span class="fu">:</span>) <span class="fu">.</span> (<span class="dt">ConfirmRepayments</span><span class="fu">:</span>) <span class="fu">&lt;$&gt;</span> genAdminActions)
            ]</code></pre></div>
</section><section id="on-the-use-of-different-level-of-testing" class="slide level2">
<h2>On the use of different level of testing</h2>
<figure>
<img src="/images/pyramide.jpg" />
</figure>
</section></section>
<section><section id="architecture" class="titleslide slide level1"><h1>Architecture</h1></section><section id="on-the-importance-of-laying-out-strong-foundations" class="slide level2">
<h2>On the importance of laying out strong foundations</h2>
<figure>
<img src="/images/architecture.jpg" />
</figure>
</section><section id="on-the-intricacies-of-building-complex-software-with-a-cabal-of-scholars" class="slide level2">
<h2>On the intricacies of building complex software with a Cabal of scholars</h2>
<figure>
<img src="/images/horlogerie.jpg" />
</figure>
</section><section id="where-haskellers-demonstrate-how-easily-they-can-adopt-foreigners-practice" class="slide level2">
<h2>Where Haskellers demonstrate how easily they can adopt foreigners practice</h2>
<figure>
<img src="/images/event-sourcing.png" />
</figure>
</section><section class="slide level2">

<figure>
<img src="/images/services-architecture.png" />
</figure>
</section></section>
<section><section id="diplomacy" class="titleslide slide level1"><h1>Diplomacy</h1></section><section id="where-we-separate-that-which-is-pure-from-that-which-is-impure" class="slide level2">
<h2>Where we separate that which is pure from that which is impure</h2>
<figure>
<img src="/images/pure-impure.jpg" />
</figure>
</section><section id="where-we-learn-we-can-have-our-cake-and-eat-it-too" class="slide level2">
<h2>Where we learn we can have our cake and eat it too</h2>
<figure>
<img src="/images/boulanger.jpg" />
</figure>
</section><section id="where-haskellers-prove-they-know-how-to-communicate-with-the-rest-of-the-world" class="slide level2">
<h2>Where Haskellers prove they know how to communicate with the REST of the world</h2>
<figure>
<img src="/images/marine.jpg" />
</figure>
</section><section id="where-some-types-make-mortal-beings-doubt-about-their-sanity" class="slide level2">
<h2>Where some types make mortal beings doubt about their sanity</h2>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="kw">type</span> <span class="dt">CreateJob</span> <span class="fu">=</span> <span class="dt">ReqBody</span> <span class="ch">&#39;[JSON] Job :&gt; Post &#39;</span>[<span class="dt">JSON</span>] <span class="dt">JobId</span>
<span class="kw">type</span> <span class="dt">ListJobs</span>  <span class="fu">=</span> <span class="dt">Get</span> <span class="ch">&#39;[JSON] [Job]</span>
<span class="kw">type</span> <span class="dt">RemoveJob</span> <span class="fu">=</span> <span class="dt">Capture</span> <span class="st">&quot;jobid&quot;</span> <span class="dt">JobId</span> <span class="fu">:&gt;</span> <span class="dt">Delete</span> <span class="ch">&#39;[JSON] JobId</span>

<span class="kw">type</span> <span class="dt">SchedulerApi</span> <span class="fu">=</span> <span class="st">&quot;api&quot;</span> <span class="fu">:&gt;</span> <span class="st">&quot;scheduler&quot;</span> <span class="fu">:&gt;</span> <span class="st">&quot;jobs&quot;</span> <span class="fu">:&gt;</span> <span class="dt">CreateJob</span>
               <span class="fu">:&lt;|&gt;</span> <span class="st">&quot;api&quot;</span> <span class="fu">:&gt;</span> <span class="st">&quot;scheduler&quot;</span> <span class="fu">:&gt;</span> <span class="st">&quot;jobs&quot;</span> <span class="fu">:&gt;</span> <span class="dt">ListJobs</span>
               <span class="fu">:&lt;|&gt;</span> <span class="st">&quot;api&quot;</span> <span class="fu">:&gt;</span> <span class="st">&quot;scheduler&quot;</span> <span class="fu">:&gt;</span> <span class="st">&quot;jobs&quot;</span> <span class="fu">:&gt;</span> <span class="dt">RemoveJob</span></code></pre></div>
</section><section id="on-some-ways-data-is-persisted-to-stable-storage" class="slide level2">
<h2>On some ways data is persisted to stable storage</h2>
<figure>
<img src="/images/marbrerie.jpg" />
</figure>
</section></section>
<section><section id="war" class="titleslide slide level1"><h1>War</h1></section><section id="where-peaceful-haskellers-prepare-themselves-to-wage-war" class="slide level2">
<h2>Where peaceful Haskellers prepare themselves to wage war</h2>
<figure>
<img src="/images/machines-de-guerre.jpg" />
</figure>
</section><section class="slide level2">

<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">lendingHost ::</span> <span class="dt">Service</span>
            <span class="ot">-&gt;</span> <span class="dt">Property</span> <span class="dt">HasInfo</span>
lendingHost svc <span class="fu">=</span> propertyList <span class="fu">$</span> props
    <span class="fu">&amp;</span> installLatestDocker
    <span class="fu">&amp;</span> dockerComposeInstalled
    <span class="fu">&amp;</span> File.dirExists certPath
    <span class="fu">&amp;</span> writeSslKey <span class="st">&quot;nginx-private-key&quot;</span> <span class="st">&quot;lending.capital-match.com&quot;</span>
    <span class="fu">&amp;</span> restrictToOwner (certPath <span class="fu">&lt;/&gt;</span> <span class="st">&quot;ssl.key&quot;</span>)
    <span class="fu">&amp;</span> writeCertificateChain <span class="st">&quot;nginx-public-cert&quot;</span> <span class="st">&quot;lending.capital-match.com&quot;</span>
    <span class="fu">&amp;</span> (certPath <span class="fu">&lt;&gt;</span> <span class="st">&quot;ssl-unified.crt&quot;</span>) <span class="ot">`File.mode`</span>
      combineModes [ownerWriteMode, ownerReadMode]
    <span class="fu">&amp;</span> hasDataContainer <span class="st">&quot;cm-data&quot;</span> dataImage
    <span class="fu">&amp;</span> composeUp <span class="dt">True</span> <span class="st">&quot;/home/build/docker-compose.yml&quot;</span>
      (<span class="dt">Just</span> [(<span class="st">&quot;ROOT_PASSWORD&quot;</span>,rootPassword)])</code></pre></div>
</section><section id="on-the-war-time-organisation-of-haskells-legions" class="slide level2">
<h2>On the war-time organisation of Haskell’s legions</h2>
<figure>
<img src="/images/militaire.jpg" />
</figure>
</section><section class="slide level2">

<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">    <span class="dt">ImageName</span> <span class="st">&quot;capitalmatch/nginx&quot;</span> <span class="ot">`buildImageBy`</span> \imageName <span class="ot">-&gt;</span> <span class="kw">do</span>
       need [<span class="st">&quot;nginx/Dockerfile&quot;</span>,<span class="st">&quot;nginx/reload_nginx.sh&quot;</span>
            , <span class="st">&quot;nginx/forego&quot;</span>, <span class="st">&quot;nginx/Procfile&quot;</span>]
       cmdDockerBuild imageName <span class="st">&quot;nginx&quot;</span>

    <span class="st">&quot;docker//source-version.txt&quot;</span> <span class="fu">%&gt;</span> \versionFile <span class="ot">-&gt;</span> <span class="kw">do</span>
      alwaysRerun
      <span class="dt">Stdout</span> v <span class="ot">&lt;-</span> cmd <span class="st">&quot;git&quot;</span> [<span class="st">&quot;rev-parse&quot;</span>, <span class="st">&quot;HEAD&quot;</span>]
      writeFileChanged versionFile v</code></pre></div>
</section><section id="on-the-capabilities-to-wage-war-outside-of-haskelland" class="slide level2">
<h2>On the capabilities to wage war outside of Haskelland</h2>
<figure>
<img src="/images/marine-formation.jpg" />
</figure>
</section><section class="slide level2">

<figure>
<img src="/images/system-architecture.png" />
</figure>
</section></section>
<section><section id="conclusion" class="titleslide slide level1"><h1>Conclusion</h1></section><section id="what-benefits-one-can-expect-from-visiting-haskelland" class="slide level2">
<h2>What benefits one can expect from visiting Haskelland</h2>
<figure>
<img src="/images/paix-utrecht.jpg" />
</figure>
</section><section id="what-the-cautious-traveller-should-be-aware-of-when-ashoring-haskelland" class="slide level2">
<h2>What the cautious traveller should be aware of when ashoring Haskelland</h2>
<figure>
<img src="/images/rhinoceros.jpg" />
</figure>
</section></section>
<section><section id="acknowledgements" class="titleslide slide level1"><h1>Acknowledgements</h1></section><section id="credits" class="slide level2">
<h2>Credits</h2>
<p>All the woodcuts illustrating this talk are drawn from the <a href="http://planches.eu">Encyclopédie de Diderot et d’Alembert</a> with the exception of:</p>
<ul>
<li class="fragment"><a href="http://40.media.tumblr.com/8b72c0e766b096a0d83c6a98f6586a1d/tumblr_n8m8bas4Xe1tgg8dko1_1280.jpg">Durer’s “Artist drawing a couching woman”</a>,</li>
<li class="fragment">The <a href="https://upload.wikimedia.org/wikipedia/commons/3/3b/Pyramide_Austerlitz_1805.jpg">Austerlitz Pyramid</a>,</li>
<li class="fragment"><a href="https://alicegonella.files.wordpress.com/2013/04/durers-rhino-1515.jpg">Durer’s Rhinoceros</a>,</li>
<li class="fragment"><a href="http://gallica.bnf.fr/ark:/12148/btv1b8408177f/f1.highres">Allégorie à la Paix d’Utrecht</a>.</li>
</ul>
</section><section id="thanks" class="slide level2">
<h2>Thanks</h2>
<ul>
<li class="fragment">To all the fine people at Capital Match who made all this possible,</li>
<li class="fragment">To Haskellers all over the world who fuel the fire with their wits and spirit,</li>
<li class="fragment">To Haskell B. Curry who, among others, laid out the foundations for our daily job.</li>
</ul>
</section></section>
    </div>
  </div>


  <script src="/reveal.js/lib/js/head.min.js"></script>
  <script src="/reveal.js/js/reveal.js"></script>

  <script>

      // Full list of configuration options available here:
      // https://github.com/hakimel/reveal.js#configuration
      Reveal.initialize({
        controls: true,
        progress: true,
        history: true,
        center: true,
        theme: 'old-english', // available themes are in /css/theme
        transition: 'fade', // default/cube/page/concave/zoom/linear/fade/none

        // Optional libraries used to extend on reveal.js
        dependencies: [
          { src: '/reveal.js/lib/js/classList.js', condition: function() { return !document.body.classList; } },
          { src: '/reveal.js/plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
          { src: '/reveal.js/plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } },
//          { src: '/reveal.js/plugin/search/search.js', async: true, condition: function() { return !!document.body.classList; }, }
//          { src: '/reveal.js/plugin/remotes/remotes.js', async: true, condition: function() { return !!document.body.classList; } }
]});
    </script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-42631907-2', 'auto');
  ga('send', 'pageview');

</script>
</body>
</html>
